

model("Another simple") {

	sp : module("So simple", 1, 0, 0) {
	
		place : compartment("Place")
		
		place.par_group("Flow pars") {
			flow_mag   : par_real("Flow magnitude", unit(), 5)
			init_stuff : par_real("Initial stuff", unit(), 10)
		}
		
		place.has(the_series : property("The series"))
		
		place.has(test : property("Test")) {
			-1*flow_mag
		}
		
		place.has(record : property("Record")) {
			the_series
		}
		
		place.has(stuff : quantity("Stuff"), unit()) .initial { init_stuff }
		
		the_flow : flux(place.stuff, out, "The flow") { flow_mag*stuff }
	}
	
	place : compartment("Place")
	stuff : quantity("Stuff")
	
	
	idx : index_set("Place index")
	place.distribute(idx)
	
	pnb : idx.neighbor("Place neighbor", directed_tree)
	
	sol : solver("My solver", "INCADascru", 0.1)
	place.stuff.solve(sol)
	
	sp.the_flow.to(pnb)
}