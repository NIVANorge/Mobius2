

model("Another simple") {

	sp : module("So simple", 1, 0, 0) {
	
		a : compartment("A")
		b : compartment("B")
		q : quantity("Q")
		
		c : connection("graph", directed_tree) { (a|b)* }
		
		a.par_group("A pars") {
			iaq : par_real("Initial A.Q", [], 10)
		}
		
		a.has(q, [], "A.Q") .initial { iaq }
		b.has(q, [], "B.Q") .initial { 0 }
		
		flux(a.q, c, "A.Q out") { q*0.1	}
		flux(b.q, c, "B.Q out") { q*0.01 }
	}
	
	a.par_group("Weights") {
		agg_wt : par_real("The weight", [], 1)
	}
	
	aggregation_weight(a, b) { agg_wt }
	aggregation_weight(a, a) { agg_wt / target(agg_wt) }
	
	sol : solver("Solver", "INCADascru", 0.1)
	sol.solve(a.q)
	sol.solve(b.q)
	
	i : index_set("I")
	#j : index_set("J")
	
	a : compartment("A")
	b : compartment("B")
	q : quantity("Q")
	
	a.distribute(i)
	#b.distribute(j)
}