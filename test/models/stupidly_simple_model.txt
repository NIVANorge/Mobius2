
model("Simple test model") {
	
	extend("simplyq_model.txt")
	
	load("simplysoiltemp.txt", st : module("Simply soil temperature"))
	
	md : module("So very simple", 1, 1, 0) {
		
		air  : compartment("Atmosphere")
		soil : compartment("Soil")
		river : compartment("River")
		
		water : quantity("Water")
		oc    : quantity("Organic carbon")
		tox   : quantity("Toxin")
		
		soil.has(oc, unit(k g, k m-2), "SOC") .initial { 500 }
		
		soil.water.has(oc, unit(k g, k m-2), "DOC")
		
		soil.water.has(tox, unit(n g, k m-2), "Truly dissolved toxin")
		soil.oc.has(tox, unit(n g, k m-2), "Adsorbed toxin")
		soil.water.oc.has(tox, unit(n g, k m-2), "DOC-bound toxin")
		
		#TODO: finish this!
		temp : property("Temperature")
		
		river.has(temp, "River temperature") { air.temp } #TODO
		
		k_oc : property("Water-SOC partitioning coefficient") { temp * 3 }
		
		soil.water.has(k_oc, "Soil water-SOC partitioning coefficient")
		river.water.has(k_oc, "River water-SOC partitioning coefficient")
	
	}
	
	oc  : quantity("Organic carbon")
	tox : quantity("Toxin")
	
	simply_solver.solve(soil.water.oc)
	simply_solver.solve(soil.water.tox)
	simply_solver.solve(soil.water.oc.tox)
	
	sw.evap.no_carry(soil.water.oc)
	sw.evap.no_carry(soil.water.tox)

}
