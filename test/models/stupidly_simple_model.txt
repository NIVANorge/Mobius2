
model("Simple test model") {
	
	md : module("So very simple", 1, 1, 0) {
		
		a : compartment("A")
		q : quantity("Q")
		
		a.has(q, unit(), "A Q") .initial { ia }
		
		q.par_group("Init pars") {
			ia : par_real("Init a", unit(), 0)
		}
		
		q.par_group("Permissivity") {
			pm : par_real("Permissivity", unit(), 0)
		}
		
		q.par_group("Flow pars") {
			ff : par_real("Flow fraction", unit(), 0, 0, 1)
		}
		
		c : connection("Flow connection", all_to_all) { q* }

		flux(a.q, c, "The flow") {
			q * ff * target(pm)
		}
	}
	
	a : compartment("A")
	q : quantity("Q")
	
	sol : solver("Solver", "INCADascru", 0.1)
	sol.solve(a.q)
	
	i : index_set("I")
	j : index_set("J")
	
	q.distribute(i, j)
}
