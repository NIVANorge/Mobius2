
model("Simple test model") {
	
	md : module("So very simple", 1, 1, 0) {
		
		a : compartment("A")
		q : quantity("Q")
		
		a.has(q, unit(), "A Q") .initial { ia }
		
		a.par_group("Init pars") {
			ia : par_real("Init a", unit(), 0)
		}
		
		a.par_group("Flow pars") {
			p : par_real("Flow fraction", unit(), 0, 0, 1)
		}
		
		the_flow :
		flux(a.q, out, "The flow") {
			q * p
		}
	}
	
	a : compartment("A")
	q : quantity("Q")
	
	sol : solver("Solver", "INCADascru", 0.1)
	sol.solve(a.q)

	c : connection("Flow connection", all_to_all) { a* }
	
	md.the_flow.to(c)
	
	i : index_set("I")
	j : index_set("J")
	
	a.distribute(i, j)
}
