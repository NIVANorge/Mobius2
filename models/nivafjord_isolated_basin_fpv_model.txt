

model("NIVAFjord Isolated Basin FPV") {
"""
NIVAFjord in a single basin without open boundary conditions. Also, you can cover basins with FPV (floating photovoltaics).

It is also currently without horizontal exchange between basins, so it only works in a single one (or several isolated ones) for now.
"""

	# TODO: FPV cover does not dynamically affect wind mixing (not sure to how large a degree that would happen).
	extend("nivafjord_lake_model.txt")

	fpv       : compartment("FPV", basin_idx)

	bnd       : compartment("Boundary basin", basin_idx)
	
	load("modules/airsea_fpv_simple.txt",
		module("AirSea FPV Simple", air, basin, fpv, ice, heat, temp, precip, wind, g_rad, pressure, rho, a_hum, lwd, sw, attn, indicator,
			evap, cos_z, loc(basin.freeze_t), loc(basin.area), loc(layer.water[vert.top]), loc(layer.water.heat[sw_vert.top])))
	
	load("modules/nivafjord/pipe_boundary.txt", 
		module("Basin inflow", air, layer, basin, bnd, water, heat, o2, salt, co2, ch4, precip, temp, h, rho, salinity, pressure, dz, vert, dims))
		
	solve(sol, bnd.water)
}

